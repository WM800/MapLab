/* Reset / base */
* { box-sizing: border-box; }
body { font-family: 'Inter', system-ui, Arial, sans-serif; margin: 0; background:#0f141a; color:#e6ecf1; -webkit-font-smoothing: antialiased; }

:root {
	--accent: #3b82f6;
	--accent-hover: #2563eb;
	--border: #1f2a34;
	--bg-panel: #141c24;
	--bg-elev: #1b2631;
	--radius: 10px;
	--danger: #ef4444;
}

.layout-root { display: flex; height: 100vh; width:100%; }

.sidebar { width: 280px; background: linear-gradient(160deg,#141c24,#10161c); border-right:1px solid var(--border); display:flex; flex-direction:column; padding:1rem 1rem 0.75rem; gap:1rem; }
.sidebar-header { display:flex; align-items:center; justify-content:space-between; }
.sidebar-header h1 { font-size:1.1rem; font-weight:600; letter-spacing:.5px; margin:0; }

.node-list { list-style:none; margin:0; padding:0; flex:1; overflow-y:auto; scrollbar-width:thin; }
.node-list li { display:flex; align-items:center; gap:.25rem; margin-bottom:.35rem; }
.node-list li.active .node-btn { background:var(--accent); color:#fff; }

.node-btn { flex:1; text-align:left; background:var(--bg-elev); color:#d3dae0; border:1px solid var(--border); padding:.55rem .7rem; border-radius:8px; font-size:.85rem; cursor:pointer; transition:.15s; }
.node-btn:hover { background:#223041; }

.del-btn { background:transparent; color:var(--danger); border:1px solid var(--border); border-radius:8px; width:34px; height:34px; font-size:1.1rem; cursor:pointer; display:flex; align-items:center; justify-content:center; }
.del-btn:hover { background:#2a1010; }

button.primary { background:var(--accent); color:#fff; border:none; width:40px; height:40px; border-radius:12px; font-size:1.2rem; cursor:pointer; display:flex; align-items:center; justify-content:center; box-shadow:0 4px 12px -2px rgba(59,130,246,.35); }
button.primary:hover { background:var(--accent-hover); }

.editor-pane { flex:1; display:flex; flex-direction:column; padding:1.25rem 1.5rem 2rem; overflow:hidden; }
.editor-pane { flex-direction:row; gap:1rem; }
.canvas-wrapper { flex:1; display:flex; }
.right-pane { width:320px; display:flex; flex-direction:column; gap:1rem; }
.map-preview3d { background:#0f141a; border:1px solid var(--border); border-radius:14px; position:relative; overflow:hidden; }
.inspector-panel { background:var(--bg-elev); border:1px solid var(--border); border-radius:14px; padding:1rem 1.1rem 1.25rem; font-size:.75rem; line-height:1.4; display:flex; flex-direction:column; gap:.45rem; }
.inspector-panel.empty { opacity:.6; justify-content:center; align-items:center; min-height:160px; }
.inspector-panel h2 { margin:0 0 .5rem; font-size:.95rem; letter-spacing:.5px; }
.inspector-title-input { width:100%; background:#101b24; border:1px solid var(--border); border-radius:8px; padding:.45rem .6rem; color:#fff; font:inherit; font-size:.8rem; font-weight:600; letter-spacing:.5px; }
.inspector-panel select { background:#101b24; border:1px solid var(--border); color:#fff; border-radius:6px; padding:.25rem .4rem; font-size:.7rem; }
.param-grid { display:flex; flex-direction:column; gap:.5rem; margin:.5rem 0 .75rem; }
.param-item { display:grid; grid-template-columns:40px 1fr 46px; align-items:center; gap:.4rem; font-size:.6rem; }
.param-item input[type=range] { width:100%; accent-color: var(--accent); }
.meta-line { display:flex; gap:.4rem; align-items:center; }
.meta-line span { opacity:.65; min-width:60px; font-weight:500; }
.meta-line code { background:#101b24; padding:.15rem .4rem; border-radius:6px; font-size:.65rem; }
.section-title { margin-top:.25rem; font-size:.65rem; text-transform:uppercase; letter-spacing:.6px; opacity:.55; font-weight:600; }
.ports-ul { list-style:none; margin:.25rem 0 0; padding:0; display:flex; flex-direction:column; gap:.25rem; }
.ports-ul li { background:#1f2932; padding:.35rem .55rem; border:1px solid var(--border); border-radius:6px; font-size:.6rem; letter-spacing:.5px; }

@media (max-width: 1200px) {
	.right-pane { width:260px; }
	.map-preview3d { height:160px !important; }
}
@media (max-width: 980px) {
	.editor-pane { flex-direction:column; }
	.right-pane { width:100%; flex-direction:row; }
	.map-preview3d { flex:1; height:180px !important; }
	.inspector-panel { flex:1; }
}

/* Graph editor */
.graph-canvas { position:relative; flex:1; background:radial-gradient(circle at 40% 35%, #17212b, #10161c 70%); border:1px solid var(--border); border-radius:14px; overflow:hidden; }
.graph-inner { position:absolute; inset:0; }
.graph-svg { position:absolute; inset:0; width:100%; height:100%; pointer-events:none; }
.graph-node { position:absolute; width:180px; background:var(--bg-elev); border:1px solid var(--border); border-radius:12px; box-shadow:0 4px 16px -4px rgba(0,0,0,.5); font-size:.75rem; user-select:none; cursor:grab; transition:border-color .15s, box-shadow .15s; }
.graph-node.selected { border-color:var(--accent); box-shadow:0 0 0 1px var(--accent), 0 6px 20px -6px rgba(0,0,0,.65); }
.graph-node:active { cursor:grabbing; }
.node-header { padding:.55rem .7rem; font-weight:600; letter-spacing:.5px; background:#1f2932; border-bottom:1px solid var(--border); border-radius:12px 12px 0 0; }
.ports { position:relative; min-height:60px; padding:.4rem .5rem 1rem; }
.port-row { position:absolute; left:0; right:0; height:20px; display:flex; align-items:center; }
.port { width:14px; height:14px; border-radius:50%; background:#2d3c4a; border:2px solid #1f2a34; box-shadow:0 0 0 2px #0f141a; cursor:pointer; transition:.15s; }
.port.in { position:absolute; left:-7px; }
.port.out { position:absolute; right:-7px; }
.port:hover { background:var(--accent); }
.conn-path { transition:stroke .15s; }
.conn-path:hover { stroke: var(--accent-hover); }
.port-label { opacity:.8; font-size:.65rem; text-transform:uppercase; letter-spacing:.5px; font-weight:500; }
.port-label.in { margin-left:10px; }
.port-label.out { margin-right:10px; margin-left:auto; }

::-webkit-scrollbar { width:10px; }
::-webkit-scrollbar-track { background:transparent; }
::-webkit-scrollbar-thumb { background:#223041; border-radius:20px; }
::-webkit-scrollbar-thumb:hover { background:#2d4258; }

@media (max-width: 880px) {
	.sidebar { width:220px; }
	.title-input { font-size:1.3rem; }
}
